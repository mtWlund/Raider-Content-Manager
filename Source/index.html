<!DOCTYPE html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <base target="_top">
    <!-- Metro UI -->
    <link rel="stylesheet" href="https://cdn.korzh.com/metroui/v4/css/metro-all.min.css">
  </head>
  <body>
    <div data-role="appbar">
      <div class="app-bar-container">
        <a href="#" class="app-bar-item dropdown-toggle">Raider Content Manager</a>
        <ul class="d-menu" data-role="dropdown">
            <li>
                <a href="#" class="dropdown-toggle">Register</a>
                <ul class="d-menu" data-role="dropdown">
                    <li><a href="https://script.google.com/macros/s/AKfycbybjQBs3UNkmakRl1ubNhTVLJjfKGdJY8OG0pnHva-1/dev?page=index">Register Guild</a></li>
                    <li><a href="https://script.google.com/macros/s/AKfycbybjQBs3UNkmakRl1ubNhTVLJjfKGdJY8OG0pnHva-1/dev?page=presentation">Register Guild Raid</a></li>
                </ul>
            </li>
            <li>
                <a href="#" class="dropdown-toggle">Raid</a>
                <ul class="d-menu" data-role="dropdown">
                    <li><a href="#">theDate</a></li>
                    <li><a href="#">theDate2</a></li>
                    <li class="divider bg-lightGray"></li>
                    <li><a href="#">What could this be?!</a></li>
                </ul>
            </li>
            <li class="divider bg-lightGray"></li>
            <li><a href="#">Post to Discord</a></li>
        </ul>
      </div>
    </div>
    <div class="container" style="margin-top: 3.125rem">
      <!-- content here -->
      <div class="grid">
        <div class="row">
          <div class="cell"></div>
          <div class="cell"></div>
        </div>
        <div class="row">
          <div class="cell-12">
            <h1>Welcome register your guild!</h1>
            <p>Power by MetroUI, see documentation <a href="https://metroui.org.ua">here</a>.</p>
            <p>After registering your guild, a guild Id will be generated and shown. Store this RaidId (can be found in spreadsheet by admin).</p>
          </div>
          <div class="cell-12"></div>
        </div>

        <form id="register-guild" >
          <div class="row">
            <div class="cell-6">
              <div class="form-group">
                <label>Guild Name</label>
                <input name="GuildName" type="text" data-prepend="Guild Name: " data-role="input" class="metro-input" />
              </div>
            </div>
          </div>
          <div class="form-group">
              <button class="button success">Submit</button>
              <!-- <input type="button" class="button" value="Cancel"> -->
          </div>
        </form>

        
        <div class="row">
            <div class="cell-6">
                <div class="form-group" id="GuildInformation"></div>
            </div>
        </div>
        

      </div>
    </div>
    <!-- Merto UI -->
    <script src="https://cdn.korzh.com/metroui/v4/js/metro.min.js"></script>
    <!-- Submit RaidId for Guild -->
    <script>
        const contactForm = document.getElementById("register-guild")
        contactForm.addEventListener("submit", submitData)

        function setGuildInfo(guildInfo){
            console.log(guildInfo);
            //document.getElementById("GuildInformation").setAttribute("value", "guildInfo.GuildId");
            var div = document.getElementById("GuildInformation");
            div.innerHTML = '<input name="GuildName" type="text" data-append="<span class=\'mif-user\'></span>" value="' + guildInfo.Name +'" data-role="input" class="metro-input" /><input name="GuildId" type="text" data-append="Guild Id" value="' + guildInfo.Id +'" data-role="input" class="metro-input" /><input name="GuildRegDate" type="text" data-append="Registered Date" value="' + guildInfo.RegisterDate +'" data-role="input" class="metro-input" />';
        } 

        function submitData(e){
            e.preventDefault();
            console.log("Form submitted");
            //console.log(this);
            google.script.run.withSuccessHandler(setGuildInfo)
                .registerGuild(this);
        }
    </script>
    <!-- Get RaidId for Guild -->
    <script></script>
  </body>
</html>
